# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìê –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     TELEGRAM USER                            ‚îÇ
‚îÇ                    (Mobile/Desktop)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              TELEGRAM WEB APP SDK                            ‚îÇ
‚îÇ         (telegram-web-app.js –≤ index.html)                   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ initData, initDataUnsafe                                 ‚îÇ
‚îÇ  ‚Ä¢ HapticFeedback                                           ‚îÇ
‚îÇ  ‚Ä¢ MainButton, BackButton                                   ‚îÇ
‚îÇ  ‚Ä¢ Theme colors                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   REACT APPLICATION                          ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ            App.tsx (Main Component)            ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Routing –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏                     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                    ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤            ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ             ‚îÇ              ‚îÇ             ‚îÇ                   ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ    ‚îÇ  TasksTab    ‚îÇ ‚îÇ ReferralTab‚îÇ ‚îÇProfileTab‚îÇ            ‚îÇ
‚îÇ    ‚îÇ              ‚îÇ ‚îÇ            ‚îÇ ‚îÇ          ‚îÇ            ‚îÇ
‚îÇ    ‚îÇ ‚Ä¢ –ó–∞–¥–∞–Ω–∏—è    ‚îÇ ‚îÇ ‚Ä¢ –†–µ—Ñ–µ—Ä–∞–ª—ã ‚îÇ ‚îÇ ‚Ä¢ –ü—Ä–æ—Ñ–∏–ª—å‚îÇ            ‚îÇ
‚îÇ    ‚îÇ ‚Ä¢ –ù–∞–≥—Ä–∞–¥—ã    ‚îÇ ‚îÇ ‚Ä¢ –°—Å—ã–ª–∫–∏   ‚îÇ ‚îÇ ‚Ä¢ –£—Ä–æ–≤–Ω–∏ ‚îÇ            ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ           ‚îÇ                ‚îÇ             ‚îÇ                   ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                            ‚îÇ                                 ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ
‚îÇ                    ‚îÇ   API Layer   ‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ   (lib/api.ts)‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ               ‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ ‚Ä¢ getTasks()  ‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ ‚Ä¢ completeTask‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ ‚Ä¢ processRef  ‚îÇ                         ‚îÇ
‚îÇ                    ‚îÇ ‚Ä¢ getUser()   ‚îÇ                         ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  SUPABASE BACKEND                            ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇ           KV Store (Key-Value)               ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ                                              ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  user:{userId}           ‚Üí UserData         ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  task:{taskId}           ‚Üí TaskData         ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  user_tasks:{userId}     ‚Üí UserTask[]       ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  referral:{ref}:{user}   ‚Üí ReferralData     ‚îÇ           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  –§—É–Ω–∫—Ü–∏–∏: get, set, getByPrefix                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
Telegram User
    ‚Üì
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞ ‚Üí –ù–∞–∂–∏–º–∞–µ—Ç Mini App
    ‚Üì
Telegram –ø–µ—Ä–µ–¥–∞–µ—Ç initData —Å user.id
    ‚Üì
App.tsx –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
    ‚Üì
useTelegram() –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
getOrCreateUser() —Å–æ–∑–¥–∞–µ—Ç/–ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å
    ‚Üì
–ï—Å–ª–∏ –µ—Å—Ç—å startParam (ref123) ‚Üí processReferral()
    ‚Üì
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ
```

### 2Ô∏è‚É£ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

```
User –Ω–∞–∂–∏–º–∞–µ—Ç "–í—ã–ø–æ–ª–Ω–∏—Ç—å"
    ‚Üì
TasksTab.handleCompleteTask()
    ‚Üì
–ï—Å–ª–∏ –µ—Å—Ç—å action_url ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É
    ‚Üì
api.completeTask(userId, taskId)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ         ‚îÇ
‚îÇ 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å         ‚îÇ
‚îÇ 3. –ù–∞—á–∏—Å–ª–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É        ‚îÇ
‚îÇ 4. –û–±–Ω–æ–≤–∏—Ç—å experience      ‚îÇ
‚îÇ 5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
–í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    ‚Üì
–û–±–Ω–æ–≤–∏—Ç—å UI (–±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç—É—Å)
```

### 3Ô∏è‚É£ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```
User A –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É "–†–µ—Ñ–µ—Ä–∞–ª—ã"
    ‚Üì
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞: t.me/bot?start=ref{userA_id}
    ‚Üì
User A –∫–æ–ø–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç User B
    ‚Üì
User B –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É
    ‚Üì
Telegram –ø–µ—Ä–µ–¥–∞–µ—Ç startParam = "ref{userA_id}"
    ‚Üì
App.tsx –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
    ‚Üì
processReferral(userA_id, userB_id)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã      ‚îÇ
‚îÇ 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å referred_by   ‚îÇ
‚îÇ 3. –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å referral  ‚îÇ
‚îÇ 4. –ù–∞—á–∏—Å–ª–∏—Ç—å 500 stars A    ‚îÇ
‚îÇ 5. –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
User A –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –±–æ–Ω—É—Å
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
App.tsx
‚îÇ
‚îú‚îÄ‚îÄ useTelegram() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ lib/telegram.ts
‚îÇ                            ‚îî‚îÄ‚ñ∫ hooks/useTelegram.ts
‚îÇ
‚îú‚îÄ‚îÄ TasksTab
‚îÇ   ‚îú‚îÄ‚îÄ Props: userId
‚îÇ   ‚îú‚îÄ‚îÄ State: tasks[], loading, completingTask
‚îÇ   ‚îú‚îÄ‚îÄ Effects: loadTasks()
‚îÇ   ‚îî‚îÄ‚îÄ Handlers: handleCompleteTask()
‚îÇ
‚îú‚îÄ‚îÄ ReferralTab
‚îÇ   ‚îú‚îÄ‚îÄ Props: userId, userName
‚îÇ   ‚îú‚îÄ‚îÄ State: referrals[], loading
‚îÇ   ‚îú‚îÄ‚îÄ Effects: loadReferrals()
‚îÇ   ‚îî‚îÄ‚îÄ Handlers: handleCopyLink(), handleShare()
‚îÇ
‚îî‚îÄ‚îÄ ProfileTab
    ‚îú‚îÄ‚îÄ Props: user (TelegramUser)
    ‚îú‚îÄ‚îÄ State: userData, loading
    ‚îú‚îÄ‚îÄ Effects: loadUserData(), listenBalanceUpdates()
    ‚îî‚îÄ‚îÄ Computed: level, progress, daysActive
```

---

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### UserData
```typescript
{
  user_id: number          // Telegram ID
  first_name: string       // –ò–º—è –∏–∑ Telegram
  username?: string        // @username
  balance: number          // –ë–∞–ª–∞–Ω—Å –≤ stars
  level: number            // –£—Ä–æ–≤–µ–Ω—å (1-10)
  experience: number       // –û–ø—ã—Ç –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
  tasks_completed: number  // –°—á–µ—Ç—á–∏–∫ –∑–∞–¥–∞–Ω–∏–π
  referrals_count: number  // –°—á–µ—Ç—á–∏–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
  referred_by?: number     // ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
  created_at: string       // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  last_active: string      // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
}
```

### TaskData
```typescript
{
  id: number               // ID –∑–∞–¥–∞–Ω–∏—è
  title: string            // –ù–∞–∑–≤–∞–Ω–∏–µ
  description: string      // –û–ø–∏—Å–∞–Ω–∏–µ
  reward: number           // –ù–∞–≥—Ä–∞–¥–∞ –≤ stars
  type: string             // "social" | "daily" | "special"
  action_url?: string      // –°—Å—ã–ª–∫–∞ (–∫–∞–Ω–∞–ª, –≥—Ä—É–ø–ø–∞)
  is_active: boolean       // –ê–∫—Ç–∏–≤–Ω–æ –ª–∏ –∑–∞–¥–∞–Ω–∏–µ
  created_at: string       // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
}
```

### UserTask
```typescript
{
  user_id: number          // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  task_id: number          // ID –∑–∞–¥–∞–Ω–∏—è
  completed: boolean       // –í—ã–ø–æ–ª–Ω–µ–Ω–æ?
  completed_at?: string    // –ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
  created_at: string       // –ö–æ–≥–¥–∞ –Ω–∞—á–∞—Ç–æ
}
```

### ReferralData
```typescript
{
  referrer_id: number      // ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
  referred_id: number      // ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ
  reward_claimed: boolean  // –ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞
  created_at: string       // –î–∞—Ç–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
1. Telegram –ø–µ—Ä–µ–¥–∞–µ—Ç initData —Å –ø–æ–¥–ø–∏—Å—å—é
2. Backend –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ hash
3. User ID –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—Ç Telegram
4. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å user_id
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –†–µ—Ñ–µ—Ä–∞–ª—ã
if (referredUser?.referred_by) {
  return false; // –£–∂–µ –∏–º–µ–µ—Ç —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
}

// –ó–∞–¥–∞–Ω–∏—è
const existingTask = userTasks.find(t => t.task_id === taskId);
if (existingTask?.completed) {
  return { success: false }; // –£–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
const user = await kv.get<UserData>(key);
if (!user) return null;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
if (referrerId === referredId) {
  return false; // –ù–µ–ª—å–∑—è —Ä–µ—Ñ–µ—Ä–∞–ª–∏—Ç—å —Å–µ–±—è
}
```

---

## üé® UI/UX –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
```css
/* globals.css */
.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  /* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
```
Shadcn UI (–±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
    ‚Üì
–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (TasksTab, etc)
    ‚Üì
Tailwind CSS (—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è)
    ‚Üì
Dark theme –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### Responsive –¥–∏–∑–∞–π–Ω
```
Mobile first –ø–æ–¥—Ö–æ–¥
    ‚Üì
max-w-2xl - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã
    ‚Üì
–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ (grid-cols-2, grid-cols-3)
    ‚Üì
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
```

---

## üîÑ Lifecycle

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```
1. index.html –∑–∞–≥—Ä—É–∂–∞–µ—Ç telegram-web-app.js
2. React –º–æ–Ω—Ç–∏—Ä—É–µ—Ç App.tsx
3. useTelegram() –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
4. telegram.ready() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
5. telegram.expand() —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ–∫–Ω–æ
6. initializeApp() —Å–æ–∑–¥–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
7. getOrCreateUser() —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å
8. processReferral() –µ—Å–ª–∏ –µ—Å—Ç—å startParam
9. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
10. UI –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
```
1. User –∫–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É
2. hapticFeedback("light")
3. –ï—Å–ª–∏ action_url ‚Üí openTelegramLink()
4. completeTask() –Ω–∞ backend
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ experience –∏ level
7. Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
8. Event "balanceUpdated"
9. ProfileTab –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å
10. UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
```
1. User –∫–ª–∏–∫–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É
2. hapticFeedback("light")
3. setActiveTab(newTab)
4. React re-render
5. –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
6. useEffect –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
7. –°–ø–∏–Ω–Ω–µ—Ä –ø–æ–∫–∞ loading
8. –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Lazy loading**
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã
{activeTab === "tasks" && <TasksTab />}
```

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
```typescript
// useTelegram —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ (singleton)
static getInstance(): TelegramWebApp
```

3. **Batch updates**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Promise.all –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const [tasks, userTasks] = await Promise.all([
  getTasks(),
  getUserTasks(userId)
]);
```

4. **Event-based updates**
```typescript
// ProfileTab —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤–º–µ—Å—Ç–æ polling
window.addEventListener("balanceUpdated", handleUpdate);
```

---

## üöÄ Deployment

```
Code (GitHub/Local)
    ‚Üì
Vercel Build Process
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ npm install         ‚îÇ
‚îÇ npm run build       ‚îÇ
‚îÇ Optimize assets     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
Static files (dist/)
    ‚Üì
Vercel CDN
    ‚Üì
User opens: your-app.vercel.app
    ‚Üì
Telegram Web App –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

---

## üîß –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

```
1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ database.types.ts
2. –î–æ–±–∞–≤–∏—Ç—å API —Ñ—É–Ω–∫—Ü–∏–∏ –≤ api.ts
3. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ /components
4. –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É –≤ App.tsx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
5. –û–±–Ω–æ–≤–∏—Ç—å UI
```

### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã

```typescript
// 1. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö
interface DailyBonus {
  user_id: number;
  last_claim: string;
  streak: number;
}

// 2. API —Ñ—É–Ω–∫—Ü–∏—è
async function claimDailyBonus(userId: number) {
  // –õ–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
}

// 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç
function DailyBonusCard() {
  // UI –¥–ª—è –±–æ–Ω—É—Å–æ–≤
}

// 4. –î–æ–±–∞–≤–∏—Ç—å –≤ ProfileTab
<DailyBonusCard />
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- ‚úÖ –î–æ 10,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –î–æ 100 –∑–∞–¥–∞–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (CRUD)

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
- üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Postgres –≤–º–µ—Å—Ç–æ KV
- üîÑ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- üîÑ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ frontend (React Query)
- üîÑ Backend API –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- üîÑ WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**
